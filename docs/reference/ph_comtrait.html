<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>comtrait — ph_comtrait • phylocomr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">phylocomr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/phylocomr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>comtrait</h1>
    </div>

    
    <p>Calculate measures of trait dispersion within each community, and
compare observed patterns to those expected under a null model.</p>
    

    <pre><span class='fu'>ph_comtrait</span>(<span class='no'>sample</span>, <span class='no'>traits</span>, <span class='kw'>binary</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>metric</span> <span class='kw'>=</span> <span class='st'>"variance"</span>,
  <span class='kw'>null_model</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>randomizations</span> <span class='kw'>=</span> <span class='fl'>999</span>, <span class='kw'>abundance</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>sample</dt>
      <dd>(data.frame/character) sample data.frame or path to a
sample file</dd>
      <dt>traits</dt>
      <dd>(data.frame/character) traits data.frame or path to a
traits file</dd>
      <dt>binary</dt>
      <dd>(logical) a logical vector indicating what columns are to
be treated as binary characters - all others are treated as continuous</dd>
      <dt>metric</dt>
      <dd>(integer) metric to calculate. One of variance, mpd, mntd,
or range (converted to phylocom integer format internally)</dd>
      <dt>null_model</dt>
      <dd>(integer) which null model to use. See Details.</dd>
      <dt>randomizations</dt>
      <dd>(numeric) number of randomizations. Default: 999</dd>
      <dt>abundance</dt>
      <dd>(logical) If <code>TRUE</code> (default) computed accounting
for abundance. Otherwise, uses presence-absence.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data.frame of the form:
<ul>
<li> trait - Trait name
</li>
<li> sample - Sample name
</li>
<li> ntaxa - Number of taxa in sample
</li>
<li> mean - Mean value of trait in sample
</li>
<li> metric - Observed metric in sample
</li>
<li> meanrndmetric - Mean value of metric in null models
</li>
<li> sdrndmetric - Standard deviation of metric in null models
</li>
<li> sesmetric - Standardized effect size of metric
</li>
<li> ranklow - Number of randomizations with metric lower than observed
</li>
<li> rankhigh - Number of randomizations with metric higher than observed
</li>
<li> runs - Number of randomizations
</li>
</ul></p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If you give a data.frame to <code>traits</code> parameter it expects data.frame like
<ul>
<li> species - the taxon labels matching the sample data to <code>sample</code>
parameter
</li>
<li> col1,col2,col3,etc. - any number of trait columns - column names do
not matter
</li>
</ul></p>
    <p>When giving a data.frame to <code>traits</code> make sure to pass in a binary
vector for what traits are to be treated as binary.</p>
    
    <h2 class="hasAnchor" id="null-models"><a class="anchor" href="#null-models"></a>Null models</h2>

    <p></p>
    <p><ul>
<li> 0 - This null model shuffles trait values across species.
</li>
<li> 1 - Species in each sample become random draws from sample pool.
This null model maintains the species richness of each sample, but
the identities of the species occurring in each sample are randomized.
For each sample, species are drawn without replacement from the list of
all species actually occurring in at least one sample
</li>
<li> 2 - Species in each sample become random draws from traits data.
This null model maintains the species richness of each sample, but the
identities of the species occurring in each sample are randomized. For
each sample, species are drawn without replacement from the list of all
species with trait values. This function is redundant since by definition
the sample and trait species must match, but is included for consistency
with the comstruct function.
</li>
<li> 3 - Independent swap: Same as for <a href='ph_comdist.html'>ph_comdist</a> and
<a href='ph_comstruct.html'>ph_comstruct</a>
</li>
</ul></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>sfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"examples/sample_comstruct"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"phylocomr"</span>)
<span class='no'>tfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"examples/traits_aot"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"phylocomr"</span>)

<span class='co'># from files</span>
<span class='no'>sample_str</span> <span class='kw'>&lt;-</span> <span class='fu'>paste0</span>(<span class='fu'>readLines</span>(<span class='no'>sfile</span>), <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='st'>"\n"</span>)
<span class='no'>sfile2</span> <span class='kw'>&lt;-</span> <span class='fu'>tempfile</span>()
<span class='fu'>cat</span>(<span class='no'>sample_str</span>, <span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>sfile2</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>'\n'</span>)

<span class='no'>traits_str</span> <span class='kw'>&lt;-</span> <span class='fu'>paste0</span>(<span class='fu'>readLines</span>(<span class='no'>tfile</span>), <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='st'>"\n"</span>)
<span class='no'>tfile2</span> <span class='kw'>&lt;-</span> <span class='fu'>tempfile</span>()
<span class='fu'>cat</span>(<span class='no'>traits_str</span>, <span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>tfile2</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>'\n'</span>)

<span class='fu'>ph_comtrait</span>(<span class='kw'>sample</span> <span class='kw'>=</span> <span class='no'>sfile2</span>, <span class='kw'>traits</span> <span class='kw'>=</span> <span class='no'>tfile2</span>)</div><div class='output co'>#&gt; # A tibble: 24 × 11
#&gt;     trait  sample ntaxa  mean   metric meanrndmetric sdrndmetric sesmetric
#&gt;     &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#&gt; 1  traitA  clump1     8  1.75 0.214286      0.190798    0.081878  0.286863
#&gt; 2  traitA clump2a     8  1.50 0.285714      0.187813    0.084588  1.157396
#&gt; 3  traitA clump2b     8  1.50 0.285714      0.186955    0.082009  1.204255
#&gt; 4  traitA  clump4     8  1.00 0.000000      0.180681    0.087054 -2.075513
#&gt; 5  traitA    even     8  1.50 0.285714      0.187580    0.083681  1.172720
#&gt; 6  traitA  random     8  1.75 0.214286      0.188099    0.084910  0.308406
#&gt; 7  traitB  clump1     8  1.50 0.285714      1.253432    0.421117 -2.297977
#&gt; 8  traitB clump2a     8  2.00 1.142857      1.260403    0.431937 -0.272137
#&gt; 9  traitB clump2b     8  1.00 0.000000      1.223545    0.414365 -2.952819
#&gt; 10 traitB  clump4     8  2.00 1.142857      1.241241    0.438391 -0.224421
#&gt; # ... with 14 more rows, and 3 more variables: ranklow &lt;int&gt;, rankhigh &lt;int&gt;,
#&gt; #   runs &lt;int&gt;</div><div class='input'>
<span class='co'># from data.frame</span>
<span class='no'>sampledf</span> <span class='kw'>&lt;-</span> <span class='fu'>read.table</span>(<span class='no'>sfile</span>, <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>traitsdf_file</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"examples/traits_aot_df"</span>,
  <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"phylocomr"</span>)
<span class='no'>traitsdf</span> <span class='kw'>&lt;-</span> <span class='fu'>read.table</span>(<span class='kw'>text</span> <span class='kw'>=</span> <span class='fu'>readLines</span>(<span class='no'>traitsdf_file</span>), <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='fu'>ph_comtrait</span>(<span class='kw'>sample</span> <span class='kw'>=</span> <span class='no'>sampledf</span>, <span class='kw'>traits</span> <span class='kw'>=</span> <span class='no'>traitsdf</span>,
  <span class='kw'>binary</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>FALSE</span>, <span class='fl'>FALSE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; # A tibble: 24 × 11
#&gt;     trait  sample ntaxa  mean   metric meanrndmetric sdrndmetric sesmetric
#&gt;     &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#&gt; 1  traitA  clump1     8  1.75 0.214286      0.190798    0.081878  0.286863
#&gt; 2  traitA clump2a     8  1.50 0.285714      0.187813    0.084588  1.157396
#&gt; 3  traitA clump2b     8  1.50 0.285714      0.186955    0.082009  1.204255
#&gt; 4  traitA  clump4     8  1.00 0.000000      0.180681    0.087054 -2.075513
#&gt; 5  traitA    even     8  1.50 0.285714      0.187580    0.083681  1.172720
#&gt; 6  traitA  random     8  1.75 0.214286      0.188099    0.084910  0.308406
#&gt; 7  traitB  clump1     8  1.50 0.285714      1.253432    0.421117 -2.297977
#&gt; 8  traitB clump2a     8  2.00 1.142857      1.260403    0.431937 -0.272137
#&gt; 9  traitB clump2b     8  1.00 0.000000      1.223545    0.414365 -2.952819
#&gt; 10 traitB  clump4     8  2.00 1.142857      1.241241    0.438391 -0.224421
#&gt; # ... with 14 more rows, and 3 more variables: ranklow &lt;int&gt;, rankhigh &lt;int&gt;,
#&gt; #   runs &lt;int&gt;</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#null-models">Null models</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jeroen Ooms, Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
